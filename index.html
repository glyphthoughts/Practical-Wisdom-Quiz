<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlyphThoughts • Quiz</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        body {
            background: #000;
            color: #fff;
            font-family: 'VT323', monospace;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .pixel {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #fff;
            opacity: 0.29;
            border-radius: 50%;
            animation: twinkle 3s infinite alternate;
            z-index: 1;
        }

        @keyframes twinkle {
            from {
                opacity: 0.1;
                transform: scale(1);
            }

            to {
                opacity: 0.49;
                transform: scale(1.5);
            }
        }

        #quiz {
            position: relative;
            z-index: 2;
            max-width: 90%;
            width: 100%;
            margin: 0 auto;
            padding: 1rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        #question {
            font-size: clamp(1.2rem, 4vw, 2rem);
            line-height: 1.4;
            margin-bottom: 1.5rem;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s ease-out, transform 1s ease-out;
            text-align: center;
            max-width: 100%;
        }

        .answer {
            display: block;
            width: 100%;
            max-width: 100%;
            margin: 0.4rem 0;
            padding: clamp(0.6rem, 2vw, 0.8rem) clamp(0.8rem, 3vw, 1rem);
            background: rgba(17, 17, 17, 0.5) !important;
            border: 1px solid rgba(68, 68, 68, 0.5) !important;
            color: #fff;
            font-family: 'VT323', monospace;
            font-size: clamp(1rem, 3vw, 1.3rem);
            cursor: pointer;
            opacity: 0;
            transform: translateY(30px);
            transition: background 0.3s, opacity 0.8s ease-out, transform 0.8s ease-out;
            text-align: left;
            position: relative;
            overflow: hidden;
            word-wrap: break-word;
            hyphens: auto;
        }

        .answer-text {
            opacity: 1;
            transition: opacity 0.4s ease-out;
        }

        .answer-text.fade-out {
            opacity: 0;
        }

        .answer.disabled {
            cursor: not-allowed !important;
            opacity: 0.3 !important;
        }

        .answer:not(.disabled):hover {
            background: rgba(34, 34, 34, 0.7) !important;
        }

        .answer.selected {
            background: rgba(68, 68, 68, 0.8) !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
        }

        .ending-screen {
            display: none;
            position: relative;
            z-index: 2;
            max-width: 90%;
            width: 100%;
            margin: 0 auto;
            padding: 1rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .thank-you-text,
        .philosopher-text,
        .certificate-text {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
            max-width: 100%;
        }

        .thank-you-text {
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            line-height: 1.4;
            margin-bottom: 1rem;
        }

        .philosopher-text {
            font-size: clamp(1.2rem, 4vw, 1.8rem);
            margin: 1rem 0;
            color: #ccc;
        }

        .certificate-text {
            font-size: clamp(1rem, 3vw, 1.5rem);
            margin: 1rem 0;
            color: #aaa;
        }

        .claim-button {
            display: inline-block;
            margin-top: 1.5rem;
            padding: clamp(0.8rem, 3vw, 1rem) clamp(1.5rem, 4vw, 2rem);
            background: rgba(17, 17, 17, 0.5);
            border: 1px solid rgba(68, 68, 68, 0.5);
            color: #fff;
            font-family: 'VT323', monospace;
            font-size: clamp(1.1rem, 3vw, 1.4rem);
            cursor: pointer;
            text-decoration: none;
            opacity: 0;
            transform: translateY(20px);
            transition: background 0.3s, transform 0.2s, opacity 0.8s ease-out;
            max-width: 100%;
            text-align: center;
        }

        .claim-button:hover {
            background: rgba(34, 34, 34, 0.7);
            transform: translateY(-2px);
        }

        .initial-load #question,
        .initial-load .answer {
            opacity: 0;
            transform: translateY(40px);
        }

        /* Tablet styles */
        @media (min-width: 768px) {
            .pixel {
                width: 3px;
                height: 3px;
            }

            #quiz {
                max-width: 600px;
                padding: 1.5rem;
            }

            .answer {
                max-width: 420px;
                margin: 0.6rem auto;
            }

            .ending-screen {
                max-width: 600px;
                padding: 1.5rem;
            }

            .philosopher-text {
                margin: 1.5rem 0;
            }
        }

        /* Desktop styles */
        @media (min-width: 1024px) {
            #quiz {
                max-width: 800px;
                padding: 2rem;
            }

            .ending-screen {
                max-width: 800px;
                padding: 2rem;
            }

            #question {
                margin-bottom: 2rem;
            }

            .answer {
                margin: 0.5rem auto;
            }

            body {
                overflow: hidden;
            }
        }

        /* Large desktop styles */
        @media (min-width: 1440px) {
            .pixel {
                width: 4px;
                height: 4px;
            }
        }

        /* Mobile landscape orientation */
        @media (max-height: 500px) and (orientation: landscape) {
            #quiz,
            .ending-screen {
                min-height: auto;
                padding: 0.5rem;
            }

            #question {
                margin-bottom: 1rem;
            }

            .answer {
                margin: 0.3rem auto;
                padding: 0.5rem 0.8rem;
            }

            .claim-button {
                margin-top: 1rem;
            }
        }

        /* Very small screens */
        @media (max-width: 320px) {
            .answer {
                padding: 0.6rem 0.7rem;
            }

            #quiz,
            .ending-screen {
                padding: 0.8rem;
            }
        }

        /* Reduce star count on smaller screens for performance */
        @media (max-width: 768px) {
            /* JavaScript will handle this */
        }
    </style>
</head>

<body class="initial-load">
    <div id="stars"></div>

    <div id="quiz">
        <div id="question">Loading...</div>
        <button class="answer disabled" onclick="selectAnswer(this, 0)">
            <span class="answer-text">Loading...</span>
        </button>
        <button class="answer disabled" onclick="selectAnswer(this, 1)">
            <span class="answer-text">Loading...</span>
        </button>
        <button class="answer disabled" onclick="selectAnswer(this, 2)">
            <span class="answer-text">Loading...</span>
        </button>
    </div>

    <div id="ending" class="ending-screen">
        <div class="thank-you-text">Thank you for taking the quiz</div>
        <div class="philosopher-text">You are a great thinker</div>
        <div class="certificate-text">Claim your certificate now</div>
        <button class="claim-button" onclick="claimCertificate()">Claim Now</button>
    </div>

    <script>
        const questionsOriginal = [
            {
                title: "Facing Daily Obstacles",
                question: "When you encounter a significant challenge, what's your natural response?",
                answers: [
                    "Accept it as an opportunity to build character and resilience",
                    "Focus on what you can control and release attachment to outcomes",
                    "View it as temporary and maintain perspective on life's bigger picture"
                ]
            },
            {
                title: "Defining a Good Life",
                question: "What do you believe constitutes genuine fulfillment?",
                answers: [
                    "Living according to your highest values regardless of external rewards",
                    "Finding peace through understanding your place in the natural order",
                    "Developing wisdom through continuous self-examination and growth"
                ]
            },
            {
                title: "Dealing with Desire",
                question: "How do you approach your wants and cravings?",
                answers: [
                    "Practice moderation and examine whether they serve your higher purpose",
                    "Distinguish between what you need versus what you merely want",
                    "Use them as teachers to understand your deeper motivations"
                ]
            },
            {
                title: "Responding to Criticism",
                question: "When someone judges or criticizes you unfairly, you tend to:",
                answers: [
                    "Focus on whether their words contain any truth worth considering",
                    "Remember that their opinion reflects their character, not yours",
                    "Use it as practice for maintaining inner equilibrium"
                ]
            },
            {
                title: "The Nature of Control",
                question: "In difficult situations, you find most peace by:",
                answers: [
                    "Identifying exactly what aspects you can influence",
                    "Accepting the natural flow of events with grace",
                    "Focusing your energy on your responses and choices"
                ]
            },
            {
                title: "Building Character",
                question: "You believe strength of character develops best through:",
                answers: [
                    "Daily small acts of discipline and virtue",
                    "Facing adversity with courage and wisdom",
                    "Consistent self-reflection and honest self-assessment"
                ]
            },
            {
                title: "Legacy and Purpose",
                question: "What matters most in how you live your life?",
                answers: [
                    "Acting with justice and integrity in all relationships",
                    "Cultivating wisdom and sharing it with others",
                    "Living authentically according to your philosophical principles"
                ]
            }
        ];

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        const questions = shuffleArray(questionsOriginal);
        let currentQuestion = 0;
        let answers = [];
        let animationsComplete = false;
        let isFirstLoad = true;

        // Responsive star count based on screen size
        const getStarCount = () => {
            const width = window.innerWidth;
            if (width < 768) return 150; // Mobile
            if (width < 1024) return 200; // Tablet
            return 250; // Desktop
        };

        const STAR_COUNT = getStarCount();
        const starField = document.getElementById('stars');
        for (let i = 0; i < STAR_COUNT; i++) {
            const s = document.createElement('div');
            s.className = 'pixel';
            s.style.top = Math.random() * 100 + 'vh';
            s.style.left = Math.random() * 100 + 'vw';
            s.style.animationDelay = (Math.random() * 3) + 's';
            starField.appendChild(s);
        }

        window.addEventListener('load', () => {
            setTimeout(() => {
                document.body.classList.remove('initial-load');
                loadQuestion();
            }, 300);
        });

        // Handle orientation changes and screen resizing
        window.addEventListener('resize', () => {
            // Debounce resize events
            clearTimeout(window.resizeTimeout);
            window.resizeTimeout = setTimeout(() => {
                // Re-position stars if needed
                const stars = document.querySelectorAll('.pixel');
                stars.forEach(star => {
                    star.style.top = Math.random() * 100 + 'vh';
                    star.style.left = Math.random() * 100 + 'vw';
                });
            }, 250);
        });

        function updateButtonText(button, newText, callback) {
            const textSpan = button.querySelector('.answer-text');

            textSpan.classList.add('fade-out');

            setTimeout(() => {
                textSpan.textContent = newText;
                textSpan.classList.remove('fade-out');
                if (callback) callback();
            }, 400);
        }

        function loadQuestion() {
            animationsComplete = false;

            const questionEl = document.getElementById('question');
            const buttons = document.querySelectorAll('.answer');
            const q = questions[currentQuestion];

            buttons.forEach(btn => btn.classList.add('disabled'));

            if (isFirstLoad) {
                isFirstLoad = false;

                questionEl.textContent = `${q.title} — ${q.question}`;
                buttons.forEach((btn, index) => {
                    const textSpan = btn.querySelector('.answer-text');
                    textSpan.textContent = q.answers[index];
                    btn.classList.remove('selected');
                });

                setTimeout(() => {
                    questionEl.style.opacity = '1';
                    questionEl.style.transform = 'translateY(0)';
                }, 200);

                buttons.forEach((btn, index) => {
                    setTimeout(() => {
                        btn.style.opacity = '1';
                        btn.style.transform = 'translateY(0)';

                        if (index === buttons.length - 1) {
                            setTimeout(() => {
                                buttons.forEach(button => {
                                    button.classList.remove('disabled');
                                });
                                animationsComplete = true;
                            }, 800);
                        }
                    }, 600 + (index * 300));
                });

            } else {
                questionEl.style.opacity = '0';
                questionEl.style.transform = 'translateY(20px)';
                buttons.forEach(btn => {
                    btn.style.opacity = '0';
                    btn.style.transform = 'translateY(20px)';
                    btn.classList.remove('selected');
                });

                setTimeout(() => {
                    questionEl.textContent = `${q.title} — ${q.question}`;
                    questionEl.style.opacity = '1';
                    questionEl.style.transform = 'translateY(0)';
                }, 300);

                let completedAnimations = 0;
                buttons.forEach((btn, index) => {
                    setTimeout(() => {
                        updateButtonText(btn, q.answers[index], () => {
                            btn.style.opacity = '1';
                            btn.style.transform = 'translateY(0)';

                            completedAnimations++;
                            if (completedAnimations === buttons.length) {
                                setTimeout(() => {
                                    buttons.forEach(button => {
                                        button.classList.remove('disabled');
                                    });
                                    animationsComplete = true;
                                }, 600);
                            }
                        });
                    }, 800 + (index * 200));
                });
            }
        }

        let isTransitioning = false;

        function selectAnswer(clickedBtn, clickedIndex) {
            if (!animationsComplete || isTransitioning || clickedBtn.classList.contains('disabled')) {
                return;
            }

            isTransitioning = true;
            animationsComplete = false;

            const allButtons = document.querySelectorAll('.answer');
            allButtons.forEach(btn => btn.classList.add('disabled'));

            answers.push(clickedIndex);
            clickedBtn.classList.add('selected');

            const questionEl = document.getElementById('question');

            allButtons.forEach((btn, index) => {
                if (index !== clickedIndex) {
                    btn.style.opacity = '0';
                    btn.style.transform = 'translateY(-20px)';
                }
            });

            setTimeout(() => {
                clickedBtn.style.opacity = '0';
                clickedBtn.style.transform = 'translateY(-20px)';

                setTimeout(() => {
                    questionEl.style.opacity = '0';
                    questionEl.style.transform = 'translateY(-30px)';

                    setTimeout(() => {
                        currentQuestion++;
                        if (currentQuestion < questions.length) {
                            loadQuestion();
                            isTransitioning = false;
                        } else {
                            showEndingScreen();
                        }
                    }, 1000);
                }, 600);
            }, 600);
        }

        function showEndingScreen() {
            document.getElementById('quiz').style.display = 'none';
            document.getElementById('ending').style.display = 'flex';

            const thankYou = document.querySelector('.thank-you-text');
            const philosopher = document.querySelector('.philosopher-text');
            const certificate = document.querySelector('.certificate-text');
            const button = document.querySelector('.claim-button');

            setTimeout(() => {
                thankYou.style.opacity = '1';
                thankYou.style.transform = 'translateY(0)';
            }, 200);

            setTimeout(() => {
                philosopher.style.opacity = '1';
                philosopher.style.transform = 'translateY(0)';
            }, 600);

            setTimeout(() => {
                certificate.style.opacity = '1';
                certificate.style.transform = 'translateY(0)';
            }, 1000);

            setTimeout(() => {
                button.style.opacity = '1';
                button.style.transform = 'translateY(0)';
            }, 1400);

            isTransitioning = false;
        }

        function claimCertificate() {
            window.location.href = 'https://glyphthoughts.github.io/Practical-Wisdom-Certificate-Generation-Model';
        }
    </script>
</body>

</html>
